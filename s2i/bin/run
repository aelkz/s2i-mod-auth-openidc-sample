#!/bin/bash -e
#
# S2I run script for the 'mod-auth-openidc-sample-centos7' image.
# The run script executes the server that runs your application.
#
# For more information see the documentation:
#	https://github.com/openshift/source-to-image/blob/master/docs/builder_image.md
#
export KEYCLOAK_HOST=${KEYCLOAK_HOST}
export KEYCLOAK_REALM=${KEYCLOAK_REALM}
export KEYCLOAK_CLIENT_ID=${KEYCLOAK_CLIENT_ID}
export KEYCLOAK_CLIENT_SECRET=${KEYCLOAK_CLIENT_SECRET}
export KEYCLOAK_REDIRECT_URI=${KEYCLOAK_REDIRECT_URI}
export KEYCLOAK_OPENID_METATADA=${KEYCLOAK_OPENID_METATADA:-https://${KEYCLOAK_HOST}/auth/realms/${KEYCLOAK_REALM}/.well-known/openid-configuration}
export KEYCLOAK_JWKS_REFRESH_INTERVAL=${KEYCLOAK_JWKS_REFRESH_INTERVAL:-3600}

exec asdf -p 8080

